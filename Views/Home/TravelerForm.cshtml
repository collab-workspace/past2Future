@model IEnumerable<Past2Future.Models.Comment>

@{
    ViewBag.Title = "Traveler's Thoughts";
    Layout = "_TravelerLayout";
    var countries = ViewBag.Countries as List<Country>;
}

<section class="container py-5">
    <div id="welcome-username" class="fw-bold text-light mb-4 fs-1"></div>
    <div id="welcome-message" class="fw-bold text-light mb-4 fs-1"></div>
</section>

<main class="container py-4">

    <!-- Başlık -->
    <div class="text-center mb-4">
        <h1 class="display-6 accent">TRAVELER'S THOUGHTS</h1>
    </div>


    <!-- Yeni Gönderi Kartı -->
    <section class="mb-4">
        <div class="card card-elevated bg-body-tertiary border-0 text-white">
            <div class="card-body d-flex gap-3 align-items-start">

                <div class="avatar-circle bg-secondary text-white d-flex align-items-center justify-content-center flex-shrink-0">
                    <i class="bi bi-person-fill"></i>
                </div>

                <div class="flex-grow-1">



                    <form asp-action="TravelersThought" asp-controller="Home" method="post">

                        <div asp-validation-summary="ModelOnly" class="text-danger mb-2"></div>
                        <!--model doğrulaması basaısız olursa eğer tüm hata mesajları tek blok olarak burada listelenir  kullanıcı neyi boş bıraktığını toplu halde görer. -->

                        <div class="row g-2">

                            <div class="col-md-6">
                                <input name="title"
                                       class="form-control form-control-lg bg-dark text-white border-secondary"
                                       placeholder="Title (e.g., 'Paris 1789 Footprints')" />
                                <span class="text-danger">@Html.ValidationMessage("title")</span>
                            </div>


                            <div class="col-md-3">
                                <select name="isHistory"
                                        class="form-select bg-dark border-secondary">
                                    <option value="false">Prediction</option>
                                    <option value="true">History</option>
                                </select>
                            </div>

                            <div class="col-md-3">
                                <select name="CountryId" class="form-select bg-dark border-secondary text-white" required>
                                    <option value="">-- Select country --</option>
                                    @foreach (var c in countries)
                                    {
                                        <option value="@c.Id">@c.Name</option>
                                    }
                                </select>
                                <span class="text-danger">@Html.ValidationMessage("CountryId")</span>
                            </div>


                        </div>


                        <textarea name="text"
                                  class="form-control mt-2 bg-dark text-white border-secondary"
                                  rows="3"
                                  placeholder="What are you thinking about?"></textarea>
                        <span class="text-danger">@Html.ValidationMessage("text")</span>


                        <input type="hidden" name="userName" value="@User.Identity?.Name ?? " Guest"" />

                        <div class="d-flex justify-content-end align-items-center mt-2">
                            <button type="submit" class="btn btn-primary">
                                <i class="bi bi-send"></i> Post
                            </button>
                        </div>

                    </form>


                </div>
            </div>
        </div>
    </section>


    <!-- Filtre ve Arama -->
    <section class="mb-3">
        <div class="d-flex flex-wrap gap-2 align-items-center">

            <div class="dropdown">
                <button class="btn btn-outline-light dropdown-toggle"
                        type="button"
                        data-bs-toggle="dropdown">
                    Filter
                </button>

                <ul class="dropdown-menu dropdown-menu-dark">
                    <li><a class="dropdown-item filter-option" data-filter="all">All</a></li>
                    <li><a class="dropdown-item filter-option" data-filter="prediction">Predictions</a></li>
                    <li><a class="dropdown-item filter-option" data-filter="history">Historical Posts</a></li>
                </ul>
            </div>

            <div class="ms-auto" style="min-width:260px;">
                <input id="searchInput"
                       class="form-control form-control-sm bg-dark text-white"
                       placeholder="Search title/content/user/country" />
            </div>

        </div>
    </section>

    <!-- Feed -->
    <section id="feed" class="vstack gap-3">

        <div class="row g-3 mt-3">
            @foreach (var c in Model)
            {
                <partial name="TravelerThoughtCard" model="c" />
            }
        </div>


    </section>

</main>



